<!DOCTYPE html>
<html lang="en">

<head>
    <!-- basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <!-- site metas -->
    <title>Crop Circle : Famers community</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- bootstrap css -->
    <link rel="stylesheet" href="css/new folder/bootstrap.min.css">
    <!-- style css -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Responsive-->
    <link rel="stylesheet" href="css/responsive.css">

    <!-- fevicon -->
    <link rel="icon" href="favicon.ico" type="image/icon" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
    <!-- Tweaks for older IEs-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css"
        media="screen">
    <link rel="stylesheet" href="css/contact.css">
</head>
<!-- body -->

<body class="main-layout ">
    <!-- end loader -->
    <!-- header -->
    <header>
        <!-- header inner -->
        <div class="header">

            <div class="container">
                <div class="row">
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-12 col logo_section">
                        <div class="full">
                            <div class="center-desk">
                                <div class="logo">
                                    <a href="index.html"><img src="images/logo.png" alt="#"></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9">
                        <div class="location_icon_bottum_tt">
                            <ul>
                                <li><img src="icon/loc1.png" />Kenya</li>
                                <li><img src="icon/email1.png" />info@cropcircle.com</li>

                                <li><img src="icon/call1.png" />+254 718 480 954</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 location_icon_bottum">
                        <div class="row">
                            <div class="col-md-8 ">
                                <div class="menu-area">
                                    <div class="limit-box">
                                        <nav class="main-menu">
                                            <ul class="menu-area-main">
                                                <li class="active"> <a href="index.html">Home</a> </li>
                                                <li> <a href="articles.html">Articles</a> </li>
                                                <li><a href="community.html">Community</a></li>
                                                <li><a href="contact.html">Contact Us</a></li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- end header inner -->
    </header>

    <body>
        <div class="contact-container">
            <h2>Contact Us</h2>
            <p>Feel free to reach out with any questions, comments, or inquiries.</p>
    
            <form id="contact-form" class="contact-form">
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" id="name" name="name" placeholder="Your Name">
                </div>
    
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" placeholder="Your Email">
                </div>
    
                <div class="form-group">
                    <label for="message">Message</label>
                    <textarea id="message" name="message" placeholder="Your Message" rows="5"></textarea>
                </div>
    
                <button type="submit" class="submit-btn">Send Message</button>
    
                <!-- Containers for success and error messages -->
                <div id="success-message" class="form-message success-message" style="display: none;"></div>
                <div id="error-message" class="form-message error-message" style="display: none;"></div>
            </form>
        </div>
    </body>
    



    <!-- footer -->
    <!--  footer -->
    <footr>
        <div class="footer top_layer ">
            <div class="container">

                <div class="row">
                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12">
                        <div class="address">
                            <a href="index.html"> <img src="images/logo.png" alt="logo" /></a>
                            <p>"Crop Circle is a vibrant community for farmers, offering the latest industry news,
                                expert articles, and a platform to connect, share, and grow together. Join us in
                                cultivating knowledge and fostering a supportive farming network."" </p>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12">
                        <div class="address">
                            <h3>Quick links</h3>
                            <ul class="Links_footer">
                                <li><img src="icon/3.png" alt="#" /> <a href="articles.html">Articles</a> </li>
                                <li><img src="icon/3.png" alt="#" /> <a href="community.html">Community</a> </li>
                                <li><img src="icon/3.png" alt="#" /> <a href="contact.html">Contact Us</a> </li>
                                <li><img src="icon/3.png" alt="#" /> <a href="index.html">Home</a> </li>
                            </ul>
                        </div>
                    </div>


                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12">
                        <div class="address">
                            <h3>Contact Us</h3>

                            <ul class="loca">
                                <li>
                                    <a href="#"><img src="icon/loc.png" alt="#" /></a>Kenya
                                    <br>
                                </li>
                                <li>
                                    <a href="#"><img src="icon/email.png" alt="#" /></a>info@cropcircle.com
                                </li>
                                <li>
                                    <a href="#"><img src="icon/call.png" alt="#" /></a>+254 718 480 954
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="copyright">
            <div class="container">
                <p>Â© 2019 All Rights Reserved. Design By<a href=""> Gabriel Azaza</a></p>

            </div>
        </div>
    </footr>



    <script src="js/jquery.min.js"></script>





<script>
    // Function to validate form data
    async function validateForm(event) {
        event.preventDefault();
    
        // Get form fields
        var name = document.getElementById('name').value;
        var email = document.getElementById('email').value;
        var message = document.getElementById('message').value;
    
        // Validation flags
        var isValid = true;
        var errorMessages = [];
    
        // Clear previous messages
        document.getElementById('success-message').style.display = 'none';
        document.getElementById('error-message').style.display = 'none';
    
        // Validate Name
        if (name.trim() === "") {
            isValid = false;
            errorMessages.push("Name is required.");
        }
    
        // Validate Email
        var emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        if (email.trim() === "") {
            isValid = false;
            errorMessages.push("Email is required.");
        } else if (!emailPattern.test(email)) {
            isValid = false;
            errorMessages.push("Please enter a valid email address.");
        }
    
        // Validate Message
        if (message.trim() === "") {
            isValid = false;
            errorMessages.push("Message is required.");
        }
    
        // If validation fails, show error messages
        if (!isValid) {
            showErrorMessage(errorMessages.join("<br>"));
            return false; // Prevent form submission
        }
    
        // If validation passes, proceed to save data to the backend
        try {
            const dbSuccess = await sendFormDataToBackend(name, email, message);
    
            // Show success or error message based on the result
            if (dbSuccess) {
                showSuccessMessage("Message sent successfully!");
                document.getElementById('contact-form').reset();
            } else {
                showErrorMessage("There was an issue saving your message. Please try again later.");
            }
        } catch (error) {
            console.error("Error in form submission:", error);
            showErrorMessage("There was an issue sending your message. Please try again later.");
        }
    }
    
    // Add event listener to the form submit button
    document.getElementById('contact-form').addEventListener('submit', validateForm);
    
    // SAVE DATA TO DATABASE
    async function sendFormDataToBackend(name, email, message) {
        const formData = {
            name: name,
            email: email,
            message: message
        };
    
        try {
            const response = await fetch('https://crop-circle-6k2e.onrender.com/api/contact', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
            });
    
            if (!response.ok) {
                throw new Error("Failed to save message to database");
            }
            return true; // Data saved successfully
        } catch (error) {
            console.error("Error saving data to database:", error);
            return false; // Data saving failed
        }
    }
    
    // Display success message
    function showSuccessMessage(message) {
        const successMessageContainer = document.getElementById('success-message');
        successMessageContainer.innerHTML = message;
        successMessageContainer.style.display = 'block';
    }
    
    // Display error message
    function showErrorMessage(message) {
        const errorMessageContainer = document.getElementById('error-message');
        errorMessageContainer.innerHTML = message;
        errorMessageContainer.style.display = 'block';
    }
</script>
    
    

    <!-- end footer -->
    <!-- Javascript files-->
    <script src="js/custom.js"></script>

</html>